### Cookie

- 쿠키의 세가지 용도 : 인증, 개인화, 방문자 상태 체크
- 쿠키값으로 개인화가 가능함.
- 쿠키의 값으로 로그인도 가능함. 쿠키의 보안이 상당히 중요함.(sessionid)
- session cookie : 끄면 사라짐, permanent cookie : 껏다켜도 살아있음.
- Secure : https로 통신할때만 쿠키를 줌.
- 크롬에서 document.cookie 현재 쿠키 목록

### 21년 1월 21일

### 쿠키, 세션 특징 및 차이

- 공통점 : 웹 통신간 유지하려는 정보를 저장하기 위해 사용하는 것
- 차이점 : 쿠키는 개인 피씨에 저장. 세션은 서버(다른곳도 가능)에 저장

### 쿠키와 세션을 사용하는 이유

- HTTP 프로토콜의 특징이자 약점을 보완하기 위해서 사용된다.
  1. Connectionless 프로토콜 (비연결지향)
     - 클라이언트가 서버에 요청을 했을 때, 그 요청에 맞는 응답을 보낸 후 연결을 끊는 처리방식이다. HTTP 1.1 버전에서 연결을 유지하고 재활용가능
  2. Stateless 프로토콜 (상태정보 유지 안 함)
     - 클라이언트의 상태 정보를 가지지 않는 서버 처리 방식
     - 두번째 통신에서 이전 데이터를 유지하지 않음
  - but 데이터 유지가 필요한 경우가 많다. -> 매 페이지마다 로그인을 해야함;;;;

### 즉, 클라이언트와 정보 유지를 하기 위해 사용하는 것이 쿠키와 세션이다.

1. 왜 세션을 안쓰고 쿠키를 쓰냐. -> 자원낭비막기위해

### 쿠키!

- 이름, 값, 만료일(저장 기간 설정), 경로 정보로 구성되어 있다.
- 클라이언트에 총 300개의 쿠키를 저장할 수 있다.
- 하나의 도메인 당 20개의 쿠키를 가질 수 있다
- 하나의 쿠키는 4KB(=4096byte)까지 저장 가능하다.

### 예

```
방문했던 사이트에 다시 방문 하였을 때 아이디와 비밀번호 자동 입력
팝업창을 통해 "오늘 이 창을 다시 보지 않기" 체크

```

### 세션!

- 사용자로부터 들어오는 일련의 요구를 하나의 상태로보고 일정하게 유지시킴. 접속부터 종료까지!

- 세션 특징
- 웹 서버에 웹 컨테이너의 상태를 유지하기 위한 정보를 저장한다.
- 웹 서버의 저장되는 쿠키(=세션 쿠키)
- 브라우저를 닫거나, 서버에서 세션을 삭제했을때만 삭제가 되므로,
- 쿠키보다 비교적 보안이 좋다.
- 저장 데이터에 제한이 없다.(서버 용량이 허용하는 한...)
- 각 클라이언트 고유 Session ID를 부여한다.
- Session ID로 클라이언트를 구분하여 각 클라이언트 요구에 맞는 서비스 제공

- 세션의 동작 순서
- 클라이언트가 페이지를 요청한다. (사용자가 웹사이트 접근)
- 서버는 접근한 클라이언트의 Request-Header 필드인 Cookie를 확인하여,
- 클라이언트가 해당 session-id를 보냈는지 확인한다.
- session-id가 존재하지 않는다면,
- 서버는 session-id를 생성해 클라이언트에게 돌려준다.
- 서버에서 클라이언트로 돌려준 session-id를 쿠키를 사용해 서버에 저장한다.
- 쿠키 이름 : JSESSIONID
- 클라이언트는 재접속 시,이 쿠키(JSESSIONID)를 이용하여 session-id 값을 서버에 전달
